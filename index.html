<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Portfolio of Cheng Tze Keong - Senior Software Engineer, Data Scientist, and Tech Enthusiast">
    <title>Cheng Tze Keong | Software Engineer & Data Scientist</title>
    <link rel="stylesheet" href="./styles/main.css">
</head>
<body>
    <div id="canvas-container"></div>
    <div id="content" role="main">
        <h1 aria-label="Portfolio of Cheng Tze Keong">{'>'} Cheng Tze Keong</h1>
        <p id="typewriter" aria-live="polite"></p>
        
        <div class="skills">
            <div class="skill-category">
                <h2>Technical Skills</h2>
                <div class="skill-list">
                    <span class="skill-tag">Flutter</span>
                    <span class="skill-tag">Java</span>
                    <span class="skill-tag">Python</span>
                    <span class="skill-tag">Arduino</span>
                    <span class="skill-tag">TypeScript</span>
                    <span class="skill-tag">Kotlin</span>
                    <span class="skill-tag">Tensorflow</span>
                    <span class="skill-tag">PyTorch</span>
                    <span class="skill-tag">SwiftUI</span>
                    <span class="skill-tag">Node.js</span>
                    <span class="skill-tag">PHP</span>
                    <span class="skill-tag">Erlang</span>
                </div>
            </div>
            <div class="skill-category">
                <h2>Expertise</h2>
                <div class="skill-list">
                    <span class="skill-tag">Software Engineering</span>
                    <span class="skill-tag">Data Science</span>
                    <span class="skill-tag">Mobile Development</span>
                    <span class="skill-tag">Machine Learning</span>
                </div>
            </div>
        </div>

        <div class="social-links" aria-label="Social Media Links">
            <a href="https://www.linkedin.com/in/ctkqiang" target="_blank" rel="noopener noreferrer">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
                    <rect x="2" y="9" width="4" height="12"></rect>
                    <circle cx="4" cy="4" r="2"></circle>
                </svg>
                LinkedIn
            </a>
            <a href="https://www.github.com/ctkqiang" target="_blank" rel="noopener noreferrer">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
                </svg>
                GitHub
            </a>
            <a href="mailto:johnmelodymel@qq.com">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                    <polyline points="22,6 12,13 2,6"></polyline>
                </svg>
                Email
            </a>
            <a href="https://wa.me/60137397193" target="_blank" rel="noopener noreferrer">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>
                </svg>
                WhatsApp
            </a>
        <a href="weixin://dl/chat?ctkqiang" target="_blank" rel="noopener noreferrer">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 12c0 1.657-1.343 3-3 3s-3-1.343-3-3 1.343-3 3-3 3 1.343 3 3z"/>
                <path d="M21 12c0 1.657-1.343 3-3 3s-3-1.343-3-3 1.343-3 3-3 3 1.343 3 3z"/>
                <path d="M3 12h6"/>
                <path d="M15 12h6"/>
            </svg>
            WeChat
        </a>
        <a href="https://discord.gg/ctkqiang" target="_blank" rel="noopener noreferrer">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                <path d="M8 10h.01"/>
                <path d="M16 10h.01"/>
            </svg>
            Discord
        </a>
        <a href="https://line.me/ti/p/ctkqiang" target="_blank" rel="noopener noreferrer">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                <path d="M8 10h8"/>
                <path d="M8 14h8"/>
            </svg>
            Line
        </a>
        <a href="https://mastodon.social/@ctkqiang" target="_blank" rel="noopener noreferrer">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"/>
                <path d="M8 8v6"/>
                <path d="M12 8v6"/>
                <path d="M16 8v6"/>
            </svg>
            Mastodon
        </a>
        <a href="https://substack.com/@ctkqiang" target="_blank" rel="noopener noreferrer">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M4 6h16"/>
                <path d="M4 12h16"/>
                <path d="M4 18h12"/>
            </svg>
            Substack
        </a>
        <a href="https://stackoverflow.com/users/10758321/钟智强" target="_blank" rel="noopener noreferrer">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M4 17v1a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-1"/>
                <path d="M8 12h8"/>
                <path d="M8 8h8"/>
                <path d="M8 16h8"/>
            </svg>
            Stack Overflow
        </a>
    </div>

    <div class="projects">
        <h2>Featured Projects</h2>
        <div class="project-grid" id="project-grid">
            <!-- Projects will be populated by JavaScript -->
        </div>
    </div>

    <script async src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        
        (() => {
            const initTypewriter = (text, elementId) => {
                const element = document.getElementById(elementId);
                let index = 0;

                const type = () => {
                    if (index < text.length) {
                        element.textContent += text.charAt(index);
                        index++;
                        setTimeout(type, 50);
                    }
                };

                type();
                fetchProjects();
            };

            const initScene = () => {
                if (!window.THREE) {
                    console.warn('THREE.js not loaded yet, retrying...');
                    setTimeout(initScene, 100);
                    return;
                }
                

                const scene = new THREE.Scene();
                const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
                const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
                
                renderer.setSize(window.innerWidth, window.innerHeight);
                renderer.setClearColor(0x000000, 0);
                document.getElementById('canvas-container').appendChild(renderer.domElement);

                const particlesGeometry = new THREE.BufferGeometry();
                const particlesCount = 2000;
                const posArray = new Float32Array(particlesCount * 3);

                for (let i = 0; i < particlesCount * 3; i++) {
                    posArray[i] = (Math.random() - 0.5) * 5;
                }

                particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));

                const particlesMaterial = new THREE.PointsMaterial({
                    size: 0.005 * window.innerWidth / 1000,
                    color: 0x6200ea,
                    transparent: true,
                    opacity: 0.8,
                });

                const particlesMesh = new THREE.Points(particlesGeometry, particlesMaterial);
                scene.add(particlesMesh);

                camera.position.z = 2;

                const animate = () => {
                    requestAnimationFrame(animate);
                    particlesMesh.rotation.y += 0.0005;
                    renderer.render(scene, camera);
                };

                animate();

                window.addEventListener('resize', () => {
                    camera.aspect = window.innerWidth / window.innerHeight;
                    camera.updateProjectionMatrix();
                    renderer.setSize(window.innerWidth, window.innerHeight);
                });

                return { scene, camera, renderer, particlesMesh };
            };

            async function fetchProjects() {
                const API_URL = 'https://api.github.com/graphql';
                const AUTH_TOKEN = 'Bearer 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';

                const GRAPHQL_QUERY = `
                    query {
                        user(login: "ctkqiang") {
                            pinnedItems(first: 6, types: [REPOSITORY]) {
                                nodes {
                                    ... on Repository {
                                        name
                                        description
                                        stargazerCount
                                        forkCount
                                        primaryLanguage {
                                            name
                                        }
                                        url
                                    }
                                }
                            }
                        }
                    }`;

                // Helper function to create a project card
                const createProjectCard = (repo) => {
                    const projectCard = document.createElement('div');
                    projectCard.className = 'project-card';
                    projectCard.innerHTML = `
                        <h3>${repo.name}</h3>
                        <p>${repo.description || 'No description available'}</p>
                        <div class="project-links">
                            <a href="${repo.url}" target="_blank" rel="noopener noreferrer">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
                                </svg>
                                View Project
                            </a>
                        </div>
                        <div class="tech-tags">
                            <span class="tech-tag">${repo.primaryLanguage?.name || 'Various'}</span>
                            <span class="tech-tag">⭐ ${repo.stargazerCount}</span>
                            <span class="tech-tag">🍴 ${repo.forkCount}</span>
                        </div>`;
                    return projectCard;
                };

                try {
                    const response = await fetch(API_URL, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            Authorization: AUTH_TOKEN,
                        },
                        body: JSON.stringify({ query: GRAPHQL_QUERY }),
                    });

                    if (!response.ok) {
                        throw new Error(`GitHub API responded with status ${response.status}`);
                    }

                    const data = await response.json();
                    if (data.errors) {
                        throw new Error(data.errors.map((error) => error.message).join(', '));
                    }

                    const pinnedRepos = data.data.user.pinnedItems.nodes;
                    const projectGrid = document.getElementById('project-grid');
                    projectGrid.innerHTML = ''; // Clear existing content

                    if (pinnedRepos.length === 0) {
                        projectGrid.innerHTML = '<p>No pinned projects found.</p>';
                        return;
                    }

                    pinnedRepos.forEach((repo) => {
                        const projectCard = createProjectCard(repo);
                        projectGrid.appendChild(projectCard);
                    });
                } catch (error) {
                    console.error('Error fetching pinned projects:', error.message);
                    const projectGrid = document.getElementById('project-grid');
                    projectGrid.innerHTML = `<p>Error loading projects: ${error.message}</p>`;
                }
            }

            window.addEventListener('load', () => {
                initTypewriter("Senior Software Engineer | Data Scientist | Tech Enthusiast", "typewriter");
                initScene();
                fetchProjects();
            });
        })();
    </script>
</body>
</html>
