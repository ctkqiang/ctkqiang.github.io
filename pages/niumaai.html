<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç‰›é©¬AI - æ‰“å·¥äººçš„å¿«ä¹æºæ³‰</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #667eea;
            --secondary: #764ba2;
            --accent: #ff9a9e;
            --light: #f8f9fa;
            --dark: #343a40;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
            --gray: #6c757d;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --radius: 12px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: all 0.3s ease;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: var(--dark);
            overflow-x: hidden;
        }

        /* æ¬¢è¿é¡µ */
        .welcome-page {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            text-align: center;
            padding: 20px;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .welcome-page::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M0,0 L100,0 L100,100 Z" fill="rgba(255,255,255,0.1)"/></svg>');
            background-size: cover;
            z-index: 0;
        }

        .welcome-content {
            position: relative;
            z-index: 1;
            max-width: 600px;
        }

        .welcome-title {
            font-size: 3.5rem;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            animation: bounce 2s infinite;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            margin-bottom: 40px;
            line-height: 1.6;
            opacity: 0.9;
        }

        .features {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .feature {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            padding: 15px 20px;
            border-radius: var(--radius);
            width: 160px;
            box-shadow: var(--shadow);
        }

        .feature i {
            font-size: 1.8rem;
            margin-bottom: 10px;
            display: block;
        }

        .enter-btn {
            background: linear-gradient(45deg, var(--accent), #fad0c4);
            color: var(--dark);
            border: none;
            padding: 15px 50px;
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            font-weight: bold;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }

        .enter-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: 0.5s;
            z-index: -1;
        }

        .enter-btn:hover::before {
            left: 100%;
        }

        .enter-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 35px rgba(0,0,0,0.3);
        }

        /* èŠå¤©é¡µ */
        .chat-page {
            display: none;
            height: 100vh;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            position: relative;
        }

        .chat-header {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            color: white;
            padding: 20px;
            text-align: center;
            box-shadow: var(--shadow);
            position: relative;
            z-index: 10;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-title {
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .chat-actions {
            display: flex;
            gap: 15px;
        }

        .chat-action-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .chat-action-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        .chat-container {
            display: flex;
            flex-direction: column;
            height: calc(100vh - 80px);
            max-width: 1000px;
            margin: 0 auto;
            width: 100%;
            background: white;
            box-shadow: 0 0 30px rgba(0,0,0,0.1);
            position: relative;
        }

        .messages-container {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: #f8f9fa;
            min-height: 200px;
            scroll-behavior: smooth;
        }

        .message {
            margin-bottom: 20px;
            display: flex;
            animation: fadeInUp 0.4s ease;
        }

        .message.user {
            justify-content: flex-end;
        }

        .message.ai {
            justify-content: flex-start;
        }

        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 10px;
            flex-shrink: 0;
            box-shadow: var(--shadow);
        }

        .message.user .message-avatar {
            background: linear-gradient(45deg, var(--accent), #fad0c4);
            order: 2;
        }

        .message.ai .message-avatar {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            order: 1;
        }

        .message-bubble {
            max-width: 70%;
            padding: 15px 20px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            word-wrap: break-word;
            font-size: 1rem;
            line-height: 1.5;
            position: relative;
        }

        .message.user .message-bubble {
            background: linear-gradient(45deg, #ff9a9e, #fad0c4);
            color: var(--dark);
            border-bottom-right-radius: 5px;
        }

        .message.ai .message-bubble {
            background: linear-gradient(45deg, #a1c4fd, #c2e9fb);
            color: var(--dark);
            border-bottom-left-radius: 5px;
        }

        .message-time {
            font-size: 0.7rem;
            opacity: 0.7;
            margin-top: 5px;
            text-align: right;
        }

        .typing-indicator {
            display: flex;
            align-items: center;
            padding: 10px 20px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .typing-indicator.active {
            opacity: 1;
        }

        .typing-dots {
            display: flex;
            gap: 5px;
            margin-left: 10px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--gray);
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }

        .input-container {
            padding: 20px;
            background: white;
            border-top: 1px solid #eee;
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .input-field {
            flex: 1;
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 25px;
            font-size: 1rem;
            outline: none;
            background: #fafafa;
            transition: all 0.3s ease;
        }

        .input-field:focus {
            border-color: var(--primary);
            background: white;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .send-btn {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: var(--shadow);
        }

        .send-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 15px rgba(102, 126, 234, 0.4);
        }

        .send-btn:active {
            transform: scale(0.95);
        }

        .quick-replies {
            display: flex;
            gap: 10px;
            padding: 15px 20px;
            overflow-x: auto;
            background: white;
            border-top: 1px solid #eee;
        }

        .quick-reply {
            background: #f1f3f5;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.3s ease;
        }

        .quick-reply:hover {
            background: var(--primary);
            color: white;
        }

        /* åŠ¨ç”» */
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes typing {
            0%, 60%, 100% { transform: scale(1); opacity: 0.5; }
            30% { transform: scale(1.2); opacity: 1; }
        }

        /* å“åº”å¼ */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 2.5rem;
            }
            
            .features {
                flex-direction: column;
                align-items: center;
            }
            
            .message-bubble {
                max-width: 85%;
            }
            
            .chat-title {
                font-size: 1.5rem;
            }
            
            .chat-header {
                padding: 15px;
            }
            
            .quick-replies {
                padding: 10px 15px;
            }
        }

        /* æ»šåŠ¨æ¡æ ·å¼ */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
    </style>
</head>
<body>
    <!-- æ¬¢è¿é¡µ -->
    <div class="welcome-page" id="welcomePage">
        <div class="welcome-content">
            <div class="welcome-title">
                <span>ğŸ„</span>
                ç‰›é©¬AI
                <span>ğŸ´</span>
            </div>
            <div class="welcome-subtitle">
                æ‰“å·¥äººä¸“å±çš„å¿«ä¹æºæ³‰<br>
                ä¸æ˜¯AIï¼Œèƒœä¼¼AIï¼<br>
                æ¥å’Œä½ çš„ç‰›é©¬å…„å¼Ÿå” å” èŒåœºé‚£äº›äº‹å„¿ï½
            </div>
            
            <div class="features">
                <div class="feature">
                    <i class="fas fa-comment-dots"></i>
                    <div>æ™ºèƒ½åæ§½</div>
                </div>
                <div class="feature">
                    <i class="fas fa-laugh-beam"></i>
                    <div>å¹½é»˜å›å¤</div>
                </div>
                <div class="feature">
                    <i class="fas fa-heart"></i>
                    <div>æƒ…æ„Ÿå…±é¸£</div>
                </div>
            </div>
            
            <button class="enter-btn" onclick="enterChat()">
                <i class="fas fa-door-open"></i> è¿›å…¥ç‰›é©¬ä¸–ç•Œ
            </button>
        </div>
    </div>

    <!-- èŠå¤©é¡µ -->
    <div class="chat-page" id="chatPage">
        <div class="chat-header">
            <div class="chat-title">
                <span>ğŸ„ğŸ´</span>
                ç‰›é©¬AIèŠå¤©å®¤
            </div>
            <div class="chat-actions">
                <button class="chat-action-btn" onclick="toggleTheme()">
                    <i class="fas fa-moon"></i>
                </button>
                <button class="chat-action-btn" onclick="clearChat()">
                    <i class="fas fa-trash"></i>
                </button>
                <button class="chat-action-btn" onclick="showHelp()">
                    <i class="fas fa-question"></i>
                </button>
            </div>
        </div>
        
        <div class="chat-container">
            <div class="messages-container" id="messagesContainer">
                <div class="message ai">
                    <div class="message-avatar">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="message-bubble">
                        å“ˆå–½æ‰“å·¥äººï¼æˆ‘æ˜¯ä½ çš„ç‰›é©¬å…„å¼Ÿ ğŸ„ğŸ´<br>
                        ä¸æ˜¯å•¥é«˜å¤§ä¸Šçš„AIï¼Œå°±æ˜¯ä¸ªæ‡‚ä½ çš„è€æ²¹æ¡<br>
                        æœ‰å•¥æ†‹å±ˆçš„ã€æç¬‘çš„ã€æƒ³åæ§½çš„ï¼Œå°½ç®¡è¯´ï¼<br>
                        æˆ‘ä»¬ç‰›é©¬ä¹‹é—´ï¼Œå°±æ˜¯è¦äº’ç›¸å–æš–ï½ ğŸ˜‚
                        <div class="message-time" id="initialTime"></div>
                    </div>
                </div>
                
                <div class="typing-indicator" id="typingIndicator">
                    <div class="message-avatar">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="message-bubble">
                        ç‰›é©¬AIæ­£åœ¨è¾“å…¥...
                        <div class="typing-dots">
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="quick-replies" id="quickReplies">
                <button class="quick-reply" onclick="quickReply('ä»Šå¤©åˆè¢«è€æ¿éª‚äº†')">è€æ¿éª‚æˆ‘</button>
                <button class="quick-reply" onclick="quickReply('åˆè¦åŠ ç­äº†')">åˆè¦åŠ ç­</button>
                <button class="quick-reply" onclick="quickReply('å·¥èµ„å¤ªä½äº†')">å·¥èµ„å¤ªä½</button>
                <button class="quick-reply" onclick="quickReply('åŒäº‹ç”©é”…ç»™æˆ‘')">åŒäº‹ç”©é”…</button>
                <button class="quick-reply" onclick="quickReply('ä¸æƒ³ä¸Šç­')">ä¸æƒ³ä¸Šç­</button>
            </div>
            
            <div class="input-container">
                <input type="text" class="input-field" id="messageInput" placeholder="è¯´è¯´ä½ ä»Šå¤©çš„ç‰›é©¬æ—¥å¸¸..." maxlength="500">
                <button class="send-btn" onclick="sendMessage()">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <script>
        // è®¾ç½®åˆå§‹æ¶ˆæ¯çš„æ—¶é—´
        document.getElementById('initialTime').textContent = getCurrentTime();
        
        // æ™ºèƒ½å›å¤ç³»ç»Ÿ - æ ¹æ®ç”¨æˆ·è¾“å…¥å†…å®¹ç”Ÿæˆé’ˆå¯¹æ€§å›å¤
        const replySystem = {
            // å…³é”®è¯åŒ¹é…å’Œå›å¤
            patterns: [
                {
                    keywords: ['åŠ ç­', 'ç†¬å¤œ', 'é€šå®µ', 'æ™šä¸‹ç­'],
                    replies: [
                        "åˆåŠ ç­ï¼Ÿè€æ¿è¯´è¿™æ˜¯ç¦æŠ¥ï¼Œæˆ‘è¯´è¿™æ˜¯å™©æ¢¦ï¼",
                        "åŠ ç­è´¹ï¼Ÿä¸å­˜åœ¨çš„ï¼æˆ‘ä»¬é çˆ±å‘ç”µï¼",
                        "åŠ ç­å°±åƒå€Ÿé’±ï¼Œå€Ÿäº†å°±ä¸æ‰“ç®—è¿˜äº†ï¼Œè¿˜äº†è¿˜è¦å€Ÿï¼",
                        "ä½ è¯´'å¹´è½»äººè¦å¤šå¥‹æ–—'ï¼Ÿæˆ‘å¥‹æ–—äº†ï¼Œè€æ¿çš„å®é©¬æ¢æ–°çš„äº†ï¼",
                        "åŠ ç­ï¼Ÿæˆ‘çš„ç”Ÿæ´»é™¤äº†å·¥ä½œå°±æ˜¯å·¥ä½œï¼Œè€æ¿å´è¯´æˆ‘æ•ˆç‡ä½ï¼"
                    ]
                },
                {
                    keywords: ['å·¥èµ„', 'è–ªæ°´', 'è–ªèµ„', 'æ”¶å…¥', 'å·¥èµ„æ¡'],
                    replies: [
                        "ä½ è¯´'èƒ½åŠ›è¶Šå¤§è´£ä»»è¶Šå¤§'ï¼Ÿé‚£ä¸ºä»€ä¹ˆæˆ‘è´£ä»»è¶Šæ¥è¶Šå¤§ï¼Œèƒ½åŠ›å´ä¸è§æ¶¨å·¥èµ„ï¼Ÿ",
                        "å·¥èµ„å°±åƒå¤§å§¨å¦ˆï¼Œä¸€ä¸ªæœˆæ¥ä¸€æ¬¡ï¼Œä¸€å‘¨å°±æ²¡äº†ï¼",
                        "å·¥èµ„ä¸æ¶¨ï¼Œç‰©ä»·é£æ¶¨ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬ç‰›é©¬çš„ç”Ÿæ´»æ°´å¹³ï¼",
                        "å·¥èµ„å°±åƒçˆ±æƒ…ï¼Œæ‰¿è¯ºå¾ˆå¤šï¼Œå®é™…å¾ˆå°‘ï¼",
                        "è€æ¿è¯´'ä¸è¦è®¡è¾ƒçœ¼å‰å¾—å¤±'â€”â€”æ„æ€å°±æ˜¯'ç”»é¥¼ç®¡é¥±ï¼Œç°é‡‘æ²¡æœ‰'å‘—ï¼Ÿ"
                    ]
                },
                {
                    keywords: ['è€æ¿', 'é¢†å¯¼', 'ä¸Šå¸', 'ä¸»ç®¡'],
                    replies: [
                        "è€æ¿è¯´'ä¸è¦è®¡è¾ƒçœ¼å‰å¾—å¤±'â€”â€”æ„æ€å°±æ˜¯'ç”»é¥¼ç®¡é¥±ï¼Œç°é‡‘æ²¡æœ‰'å‘—ï¼Ÿ",
                        "è·Ÿæˆ‘è°ˆ'ç‹¼æ€§æ–‡åŒ–'ï¼Ÿç‹¼æ˜¯åƒè‚‰çš„å¥½å—ï¼ä½ å¤©å¤©å–‚è‰ï¼Œè¿˜æŒ‡æœ›æˆ‘å—·å—·å«ï¼Ÿ",
                        "è€æ¿è¯´'å…¬å¸æ˜¯å¤§å®¶åº­'â€”â€”æ‰€ä»¥å°±å¯ä»¥ç†ç›´æ°”å£®åœ°è®©æˆ‘æ— å¿åŠ ç­ï¼Ÿ",
                        "ä½ è¯´'çœ¼å…‰è¦æ”¾é•¿è¿œ'ï¼Ÿæˆ‘çœ¼å‰éƒ½å¿«åƒä¸ä¸Šé¥­äº†ï¼Œä½ è·Ÿæˆ‘è°ˆæœªæ¥ï¼Ÿ",
                        "è€æ¿è¯´'è¦æœ‰æ¢¦æƒ³'ï¼Œæˆ‘è¯´æˆ‘çš„æ¢¦æƒ³å°±æ˜¯ä¸ä¸Šç­è¿˜èƒ½æ‹¿å·¥èµ„ï¼"
                    ]
                },
                {
                    keywords: ['åŒäº‹', 'å›¢é˜Ÿ', 'åˆä½œ', 'ç”©é”…'],
                    replies: [
                        "è¯´å¥½çš„'å›¢é˜Ÿåä½œ'å‘¢ï¼Ÿæ€ä¹ˆæœ€åå˜æˆæˆ‘'å›¢é˜Ÿåä½œ'ï¼Œä»–ä»¬'åäº«å…¶æˆ'ï¼Ÿ",
                        "åŒäº‹ç”©é”…ç»™æˆ‘ï¼Ÿæ²¡äº‹ï¼Œæˆ‘é”…å¤šç€å‘¢ï¼Œå†ç»™ä»–åŠ ä¸ªç›–ï¼",
                        "åŒäº‹è¯´å¸®æˆ‘å¸¦é¥­ï¼Œç»“æœå¸¦äº†ä¸ªå¯‚å¯ï¼Œè¿™å°±æ˜¯èŒåœºå‹æƒ…ï¼",
                        "åŒäº‹è¯´ä¸€èµ·åˆä½œï¼Œç»“æœä»–ç”©é”…ï¼Œè¿™å°±æ˜¯èŒåœºåˆä½œï¼",
                        "åŒäº‹è¯´å¸®æˆ‘ä¿å¯†ï¼Œç»“æœå…¨å…¬å¸éƒ½çŸ¥é“äº†ï¼Œè¿™å°±æ˜¯èŒåœºä¿¡ä»»ï¼"
                    ]
                },
                {
                    keywords: ['å¼€ä¼š', 'ä¼šè®®', 'æ—©ä¼š', 'æ™šä¼š'],
                    replies: [
                        "å¼€ä¼šå°±åƒå¬å¤©ä¹¦ï¼Œé¢†å¯¼è¯´çš„æ¯ä¸ªå­—æˆ‘éƒ½è®¤è¯†ï¼Œè¿èµ·æ¥å°±å¬ä¸æ‡‚äº†ï¼",
                        "ä»Šå¤©åˆå¼€ä¼šäº†ï¼Œå¼€äº†ä¸¤å°æ—¶ï¼Œè¯´äº†ä¸¤å¥è¯ï¼Œæ€»ç»“ï¼šç»§ç»­åŠªåŠ›ï¼",
                        "å¼€ä¼šï¼Ÿä¸å°±æ˜¯æŠŠç®€å•çš„äº‹æƒ…å¤æ‚åŒ–ï¼Œå†æŠŠå¤æ‚çš„äº‹æƒ…æç ¸å—ï¼Ÿ",
                        "è€æ¿è¯´è¦æœ‰åˆ›æ–°ç²¾ç¥ï¼Œæˆ‘è¯´æˆ‘çš„åˆ›æ–°å°±æ˜¯å‡†æ—¶ä¸‹ç­ï¼",
                        "å¼€ä¼šä¸‰å°æ—¶ï¼Œæœ‰æ•ˆå†…å®¹ä¸‰åˆ†é’Ÿï¼Œè¿™å°±æ˜¯èŒåœºæ•ˆç‡ï¼"
                    ]
                },
                {
                    keywords: ['æ‘¸é±¼', 'å·æ‡’', 'åˆ’æ°´'],
                    replies: [
                        "ä¸Šç­æ‘¸é±¼æ˜¯æˆ‘çš„ä¸“ä¸šæŠ€èƒ½ï¼Œè€æ¿æŸ¥å²—æ˜¯æˆ‘çš„ç”Ÿå­˜æŒ‘æˆ˜ï¼",
                        "æ‘¸é±¼ï¼Ÿæˆ‘è¿™æ˜¯åœ¨ä¸ºå…¬å¸çš„ç”µè´¹å’Œç½‘è´¹åšè´¡çŒ®ï¼",
                        "ä½ è¯´æˆ‘æ‘¸é±¼ï¼Ÿæˆ‘è¿™æ˜¯åœ¨å…»ç²¾è“„é”ï¼Œä¸ºäº†æ›´å¥½åœ°è¢«å‰¥å‰Šï¼",
                        "æ‘¸é±¼æ˜¯æ‰“å·¥äººçš„åŸºæœ¬æƒåˆ©ï¼Œå°±åƒå‘¼å¸ä¸€æ ·è‡ªç„¶ï¼",
                        "ä¸æ‘¸é±¼æ€ä¹ˆå¯¹å¾—èµ·æˆ‘é‚£å¾®è–„çš„å·¥èµ„ï¼Ÿ"
                    ]
                },
                {
                    keywords: ['è¾èŒ', 'ç¦»èŒ', 'è·³æ§½', 'ä¸å¹²äº†'],
                    replies: [
                        "æƒ³è¾èŒï¼Ÿå…ˆçœ‹çœ‹é“¶è¡Œå¡ä½™é¢å†è¯´ï¼",
                        "ä½ è¯´'ä½ ä¸å¹²æœ‰çš„æ˜¯äººå¹²'â€”â€”é‚£ä½ å»æ‰¾åˆ«äººå•Šï¼",
                        "è¾èŒï¼Ÿæ¢ä¸ªåœ°æ–¹ç»§ç»­å½“ç‰›é©¬è€Œå·²ï¼",
                        "ä»Šå¤©åˆæƒ³è¾èŒäº†ï¼Ÿæ­£å¸¸ï¼Œæˆ‘æ¯å¤©æƒ³800éï¼",
                        "è¾èŒçš„å¿µå¤´æ˜¯æ”¯æ’‘æˆ‘ä¸Šç­çš„å”¯ä¸€åŠ¨åŠ›ï¼"
                    ]
                },
                {
                    keywords: ['KPI', 'ç»©æ•ˆ', 'è€ƒæ ¸', 'ç›®æ ‡'],
                    replies: [
                        "KPIï¼Ÿå°±æ˜¯è€æ¿ç”»çš„å¤§é¥¼çš„å…·ä½“æ•°å­—ç‰ˆï¼",
                        "æ—©å®‰æ‰“å·¥äººï¼ä»Šå¤©çš„KPIæ˜¯æ´»ç€ä¸‹ç­ï¼",
                        "KPIå®Œæˆäº†æœ‰å¥–åŠ±å—ï¼Ÿæ²¡æœ‰ï¼Ÿé‚£å®Œä¸æˆæœ‰æƒ©ç½šå—ï¼Ÿæœ‰ï¼",
                        "ä½ è¯´KPIè¦æŒ‘æˆ˜è‡ªæˆ‘ï¼Ÿæˆ‘æŒ‘æˆ˜äº†ï¼Œç»“æœå°±æ˜¯åŠ ç­æ›´ä¹…äº†ï¼",
                        "KPIå°±åƒé©´å‰é¢çš„èƒ¡èåœï¼Œçœ‹å¾—è§åƒä¸ç€ï¼"
                    ]
                }
            ],

            // é€šç”¨å›å¤ï¼Œå½“æ²¡æœ‰åŒ¹é…åˆ°å…³é”®è¯æ—¶ä½¿ç”¨
            genericReplies: [
                "å•Šå¯¹å¯¹å¯¹ï¼Œè€æ¿ç”»çš„é¥¼çœŸé¦™ï¼Œæˆ‘éƒ½åƒé¥±äº†ä¸‰å¹´äº†è¿˜é¥¿ç€å‘¢ï¼",
                "ä¸Šç­å°±åƒè°ˆæ‹çˆ±ï¼Œæ˜æ˜ä¸åˆé€‚è¿˜è¦ç¡¬åœ¨ä¸€èµ·ï¼Œè¿˜è¦å‡è£…å¾ˆå¹¸ç¦ï¼",
                "ä»Šå¤©åˆæ˜¯ä¸ºå…¬å¸å…è´¹åŠ ç­çš„ä¸€å¤©ï¼Œè€æ¿è¯´è¿™æ˜¯ç¦æŠ¥ï¼Œæˆ‘è¯´æ˜¯æ´»è¯¥ï¼",
                "å·¥èµ„å°±åƒå¤§å§¨å¦ˆï¼Œä¸€ä¸ªæœˆæ¥ä¸€æ¬¡ï¼Œä¸€å‘¨å°±æ²¡äº†ï¼",
                "ä¸Šç­å°±åƒåç‰¢ï¼Œè€æ¿æ˜¯ç‹±è­¦ï¼Œå·¥èµ„æ˜¯æ”¾é£æ—¶é—´ï¼",
                "ä»Šå¤©åˆè¢«å®‰æ’äº†ä¸å¯èƒ½å®Œæˆçš„ä»»åŠ¡ï¼Œæˆ‘è¯´å¥½çš„ï¼Œç„¶åç­‰ç€çœ‹å¥‡è¿¹ï¼",
                "ä¸Šç­å°±åƒç­‰å…¬äº¤ï¼Œç­‰äº†å¾ˆä¹…ä¸æ¥ï¼Œæ¥äº†è¿˜æŒ¤ä¸ä¸Šï¼",
                "å·¥èµ„å°±åƒå½©ç¥¨ï¼Œå¶å°”ä¸­ä¸€æ¬¡ï¼Œå¤§éƒ¨åˆ†æ—¶å€™æ˜¯ç©ºæ°”ï¼",
                "ä¸Šç­å°±åƒè¿‡å±±è½¦ï¼Œåˆºæ¿€ä½†æ˜¯ä¸å®‰å…¨ï¼Œè¿˜æ²¡æœ‰ä¿é™©ï¼",
                "å·¥èµ„å°±åƒé’æ˜¥ï¼Œä¸€å»ä¸å¤è¿”ï¼",
                "ä¸Šç­å°±åƒæ¸¸æ³³ï¼Œæ¸¸ä¸åŠ¨è¿˜ä¸èƒ½ä¸Šå²¸ï¼",
                "å·¥èµ„å°±åƒè®°å¿†ï¼Œè¶Šæ¥è¶Šæ¨¡ç³Šï¼",
                "å·¥èµ„ä¸æ¶¨ï¼Œè¦æ±‚è¶Šæ¥è¶Šé«˜ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬ç‰›é©¬çš„ç”Ÿæ´»ï¼"
            ],

            // æ ¹æ®ç”¨æˆ·æ¶ˆæ¯ç”Ÿæˆå›å¤
            generateReply(userMessage) {
                const lowerMessage = userMessage.toLowerCase();
                
                // æŸ¥æ‰¾åŒ¹é…çš„å…³é”®è¯æ¨¡å¼
                for (const pattern of this.patterns) {
                    if (pattern.keywords.some(keyword => lowerMessage.includes(keyword))) {
                        const randomIndex = Math.floor(Math.random() * pattern.replies.length);
                        return pattern.replies[randomIndex];
                    }
                }
                
                // å¦‚æœæ²¡æœ‰åŒ¹é…åˆ°ç‰¹å®šæ¨¡å¼ï¼Œä½¿ç”¨é€šç”¨å›å¤
                const randomIndex = Math.floor(Math.random() * this.genericReplies.length);
                return this.genericReplies[randomIndex];
            }
        };

        let currentPage = 'welcome';
        let isDarkMode = false;

        function enterChat() {
            document.getElementById('welcomePage').style.display = 'none';
            document.getElementById('chatPage').style.display = 'block';
            currentPage = 'chat';
            // èšç„¦è¾“å…¥æ¡†
            setTimeout(() => {
                document.getElementById('messageInput').focus();
            }, 100);
        }

        function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();
            
            if (message === '') return;

            // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
            addMessage(message, 'user');
            input.value = '';

            // æ˜¾ç¤ºæ­£åœ¨è¾“å…¥æŒ‡ç¤ºå™¨
            showTypingIndicator();
            
            // å»¶è¿Ÿæ·»åŠ AIå›å¤
            setTimeout(() => {
                const reply = replySystem.generateReply(message);
                hideTypingIndicator();
                addMessage(reply, 'ai');
            }, 1000 + Math.random() * 1000);
        }

        function quickReply(text) {
            document.getElementById('messageInput').value = text;
            sendMessage();
        }

        function addMessage(text, sender) {
            const messagesContainer = document.getElementById('messagesContainer');
            if (!messagesContainer) {
                console.error('æ¶ˆæ¯å®¹å™¨æœªæ‰¾åˆ°');
                return;
            }

            // éšè—æ­£åœ¨è¾“å…¥æŒ‡ç¤ºå™¨
            hideTypingIndicator();

            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            const avatarDiv = document.createElement('div');
            avatarDiv.className = 'message-avatar';
            avatarDiv.innerHTML = sender === 'user' ? '<i class="fas fa-user"></i>' : '<i class="fas fa-robot"></i>';
            
            const bubbleDiv = document.createElement('div');
            bubbleDiv.className = 'message-bubble';
            bubbleDiv.textContent = text;
            
            const timeDiv = document.createElement('div');
            timeDiv.className = 'message-time';
            timeDiv.textContent = getCurrentTime();
            
            bubbleDiv.appendChild(timeDiv);
            
            if (sender === 'user') {
                messageDiv.appendChild(bubbleDiv);
                messageDiv.appendChild(avatarDiv);
            } else {
                messageDiv.appendChild(avatarDiv);
                messageDiv.appendChild(bubbleDiv);
            }
            
            messagesContainer.appendChild(messageDiv);

            // æ»šåŠ¨åˆ°åº•éƒ¨
            setTimeout(() => {
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }, 100);
        }

        function showTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            typingIndicator.classList.add('active');
            
            // æ»šåŠ¨åˆ°åº•éƒ¨
            const messagesContainer = document.getElementById('messagesContainer');
            setTimeout(() => {
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }, 100);
        }

        function hideTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            typingIndicator.classList.remove('active');
        }

        function getCurrentTime() {
            const now = new Date();
            return `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;
        }

        function toggleTheme() {
            isDarkMode = !isDarkMode;
            const body = document.body;
            const chatPage = document.getElementById('chatPage');
            const chatContainer = document.querySelector('.chat-container');
            
            if (isDarkMode) {
                body.style.background = 'linear-gradient(135deg, #2c3e50 0%, #3498db 100%)';
                chatPage.style.background = 'linear-gradient(135deg, #34495e 0%, #2c3e50 100%)';
                chatContainer.style.background = '#2c3e50';
                chatContainer.style.color = '#ecf0f1';
                document.querySelector('.messages-container').style.background = '#34495e';
                document.querySelector('.input-container').style.background = '#2c3e50';
                document.querySelector('.input-container').style.borderTopColor = '#34495e';
                document.querySelector('.input-field').style.background = '#34495e';
                document.querySelector('.input-field').style.borderColor = '#34495e';
                document.querySelector('.input-field').style.color = '#ecf0f1';
                document.querySelectorAll('.quick-reply').forEach(btn => {
                    btn.style.background = '#34495e';
                    btn.style.color = '#ecf0f1';
                });
            } else {
                body.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
                chatPage.style.background = 'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)';
                chatContainer.style.background = 'white';
                chatContainer.style.color = '#343a40';
                document.querySelector('.messages-container').style.background = '#f8f9fa';
                document.querySelector('.input-container').style.background = 'white';
                document.querySelector('.input-container').style.borderTopColor = '#eee';
                document.querySelector('.input-field').style.background = '#fafafa';
                document.querySelector('.input-field').style.borderColor = '#e0e0e0';
                document.querySelector('.input-field').style.color = '#343a40';
                document.querySelectorAll('.quick-reply').forEach(btn => {
                    btn.style.background = '#f1f3f5';
                    btn.style.color = '#343a40';
                });
            }
        }

        function clearChat() {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºèŠå¤©è®°å½•å—ï¼Ÿ')) {
                const messagesContainer = document.getElementById('messagesContainer');
                messagesContainer.innerHTML = `
                    <div class="message ai">
                        <div class="message-avatar">
                            <i class="fas fa-robot"></i>
                        </div>
                        <div class="message-bubble">
                            èŠå¤©è®°å½•å·²æ¸…ç©ºï¼æœ‰ä»€ä¹ˆæƒ³åæ§½çš„å°½ç®¡è¯´ï½
                            <div class="message-time">${getCurrentTime()}</div>
                        </div>
                    </div>
                    <div class="typing-indicator" id="typingIndicator">
                        <div class="message-avatar">
                            <i class="fas fa-robot"></i>
                        </div>
                        <div class="message-bubble">
                            ç‰›é©¬AIæ­£åœ¨è¾“å…¥...
                            <div class="typing-dots">
                                <div class="typing-dot"></div>
                                <div class="typing-dot"></div>
                                <div class="typing-dot"></div>
                            </div>
                        </div>
                    </div>
                `;
            }
        }

        function showHelp() {
            alert('ç‰›é©¬AIä½¿ç”¨è¯´æ˜ï¼š\n\n1. è¾“å…¥ä½ çš„èŒåœºå›°æ‰°æˆ–åæ§½\n2. AIä¼šä»¥å¹½é»˜æ–¹å¼å›åº”\n3. ä½¿ç”¨å¿«æ·å›å¤å¿«é€Ÿå¼€å§‹å¯¹è¯\n4. ç‚¹å‡»å³ä¸Šè§’æŒ‰é’®åˆ‡æ¢ä¸»é¢˜æˆ–æ¸…ç©ºèŠå¤©');
        }

        // å›è½¦å‘é€æ¶ˆæ¯
        document.getElementById('messageInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        // é¡µé¢åŠ è½½å®Œæˆåèšç„¦è¾“å…¥æ¡†
        window.addEventListener('load', function() {
            if (currentPage === 'chat') {
                setTimeout(() => {
                    document.getElementById('messageInput').focus();
                }, 100);
            }
        });
    </script>
</body>
</html>